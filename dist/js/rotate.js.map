{"version":3,"file":"/dist/js/rotate.js","mappings":"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","sources":["webpack://wo/./src/js/front/rotate.js"],"sourcesContent":["(function () {\n\tconst _window = typeof window !== \"undefined\" ? window : this;\n\n\t/**\n\t * WORotate instance\n\t */\n\tconst WORotate = (_window.WORotate = function (element, settings) {\n\t\tconst _ = this;\n\n\t\t/**\n\t\t * Avoid initializing twice on the same element.\n\t\t */\n\t\tif (element._worotate) {\n\t\t\treturn element._worotate;\n\t\t}\n\n\t\t_.ele = element;\n\t\t_.ele._worotate = _;\n\n\t\t/**\n\t\t * Merge settings with defaults.\n\t\t */\n\t\t_.opt = Object.assign(\n\t\t\t{},\n\t\t\t{ interval: 5000, heightMode: \"fixed\", stopTrack: 0 },\n\t\t\tsettings\n\t\t);\n\n\t\t/**\n\t\t * Iniit\n\t\t */\n\t\t_.init();\n\t});\n\n\t/**\n\t * Prototype functions\n\t */\n\tconst WORotatePrototype = WORotate.prototype;\n\n\t/**\n\t * Interface with WOTrack if it is present.\n\t */\n\tWORotatePrototype.getTrackingAdId = function (element) {\n\t\tconst _ = this;\n\n\t\tif (_.tracker && typeof _.tracker.getTrackingAdId !== \"undefined\") {\n\t\t\treturn _.tracker.getTrackingAdId(element);\n\t\t}\n\t};\n\n\tWORotatePrototype.bindTrackClick = function (element) {\n\t\tconst _ = this;\n\n\t\tif (_.tracker && typeof _.tracker.bindTrackClick !== \"undefined\") {\n\t\t\t// click binding will be blocked by tracker if disabled.\n\t\t\t_.tracker.bindTrackClick(element);\n\t\t}\n\t};\n\n\tWORotatePrototype.trackImpression = function (element) {\n\t\tconst _ = this;\n\n\t\tif (\n\t\t\t_.tracker &&\n\t\t\ttypeof _.tracker.trackImpressionByElement !== \"undefined\"\n\t\t) {\n\t\t\t// impression tracking will be blocked by tracker if disabled.\n\n\t\t\tconsole.log(_.opt.stopTrack);\n\t\t\tif (\n\t\t\t\t_.opt.stopTrack <= 0 ||\n\t\t\t\tDate.now() - _.initTimestamp <= _.opt.stopTrack\n\t\t\t) {\n\t\t\t\t_.tracker.trackImpressionByElement(element);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Set slide to active\n\t */\n\tWORotatePrototype.setActive = function (idx) {\n\t\tconst _ = this;\n\t\t_.active = idx;\n\n\t\t/**\n\t\t * Remove active class from slides\n\t\t */\n\t\tArray.from(_.slides).forEach((el, i) => {\n\t\t\tif (_.active !== i) {\n\t\t\t\tel.classList.remove(\"woactive\");\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Add active class to slide\n\t\t */\n\t\t_.slides[_.active].classList.add(\"woactive\");\n\n\t\t/**\n\t\t * Track impression\n\t\t */\n\t\t_.trackImpression(_.slides[_.active]);\n\t};\n\n\tWORotatePrototype.next = function () {\n\t\tconst _ = this;\n\n\t\t/**\n\t\t * Change active slide and start the timeout.\n\t\t */\n\t\t_.setActive(_.active < _.slides.length - 1 ? _.active + 1 : 0);\n\t\t_.startInterval();\n\t};\n\n\tWORotatePrototype.startInterval = function () {\n\t\tconst _ = this;\n\n\t\t/**\n\t\t * Set a new timeout, bound to this instance\n\t\t */\n\t\t_.timeout = setTimeout(_.next.bind(_), _.opt.interval);\n\t};\n\n\tWORotatePrototype.outerHeight = function (element) {\n\t\tif (typeof window.getComputedStyle === \"undefined\") {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst height = element.offsetHeight,\n\t\t\tstyle = window.getComputedStyle(element);\n\n\t\treturn [\"top\", \"bottom\"]\n\t\t\t.map((side) => parseInt(style[`margin-${side}`]))\n\t\t\t.reduce((total, side) => total + side, height);\n\t};\n\n\tWORotatePrototype.init = function () {\n\t\tconst _ = this;\n\t\tlet slideHeight = 0;\n\n\t\t/**\n\t\t * Add class to container.\n\t\t */\n\t\t_.ele.classList.add(\"worotate\");\n\n\t\t/**\n\t\t * Add all children as slides.\n\t\t */\n\t\t_.slides = _.ele.children;\n\n\t\t/**\n\t\t * No slides? Stop init.\n\t\t */\n\t\tif (_.slides.length <= 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\n\t\t * Initiate tracker\n\t\t */\n\t\t_.initTimestamp = Date.now();\n\n\t\t_.tracker = typeof WOTrack !== \"undefined\" ? new WOTrack() : null;\n\n\t\t/**\n\t\t * Store tracking ID so DOM can't be manipulated later.\n\t\t * Also grab the slide height if needed.\n\t\t */\n\t\tArray.from(_.slides).forEach((slide, idx) => {\n\t\t\t_.slides[idx].trackId = _.getTrackingAdId(slide);\n\t\t\t_.bindTrackClick(slide);\n\n\t\t\tif (_.opt.heightMode === \"fixed\") {\n\t\t\t\tconst thisH = _.outerHeight(slide);\n\n\t\t\t\tif (thisH > slideHeight) {\n\t\t\t\t\tslideHeight = thisH;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Determine if we have an active slide from the slide markup.\n\t\t */\n\t\tlet active = Array.from(_.slides).findIndex((e) => {\n\t\t\treturn e.classList.contains(\"woactive\");\n\t\t});\n\n\t\tif (!active || active < 0) {\n\t\t\tactive = 0;\n\t\t}\n\n\t\t/**\n\t\t * Set the active slide.\n\t\t */\n\t\t_.setActive(active);\n\t\t_.ele.classList.add(\"woloaded\");\n\n\t\t/**\n\t\t * If we have more than 1 slide, start the rotation interval.\n\t\t */\n\t\tif (_.slides.length > 1) {\n\t\t\t/**\n\t\t\t * Maybe set a min-height.\n\t\t\t */\n\t\t\tif (_.opt.heightMode === \"fixed\" && slideHeight > 0) {\n\t\t\t\t_.ele.style.minHeight = slideHeight + \"px\";\n\t\t\t}\n\n\t\t\t_.startInterval();\n\t\t}\n\t};\n\n\tconst WORotateInit = (_window.WORotateInit = function (elements) {\n\t\t/**\n\t\t * Loop through all rotating ad groups on the page and initialize a WORotate instance.\n\t\t */\n\t\tif (elements && typeof elements !== \"undefined\" && elements.length > 0) {\n\t\t\tfor (const element of elements) {\n\t\t\t\t/**\n\t\t\t\t * Get timeout from data attribute, if one exists.\n\t\t\t\t */\n\t\t\t\tlet refresh = parseInt(element.getAttribute(\"data-interval\"), 10);\n\n\t\t\t\tif (!refresh || refresh === undefined || refresh < 1000) {\n\t\t\t\t\trefresh = 5000;\n\t\t\t\t}\n\n\t\t\t\tlet stopTracking = parseInt(element.getAttribute(\"data-stoptrack\"), 10);\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof stopTracking === \"undefined\" ||\n\t\t\t\t\tstopTracking < 0 ||\n\t\t\t\t\tisNaN(stopTracking)\n\t\t\t\t) {\n\t\t\t\t\tstopTracking = 0;\n\t\t\t\t}\n\n\t\t\t\tnew WORotate(element, { interval: refresh, stopTrack: stopTracking });\n\t\t\t}\n\t\t}\n\t});\n})();\n"],"names":["_window","window","WORotate","element","settings","_","_worotate","ele","opt","Object","assign","interval","heightMode","stopTrack","init","WORotatePrototype","prototype","getTrackingAdId","tracker","bindTrackClick","trackImpression","trackImpressionByElement","console","log","Date","now","initTimestamp","setActive","idx","active","Array","from","slides","forEach","el","i","classList","remove","add","next","length","startInterval","timeout","setTimeout","bind","outerHeight","getComputedStyle","height","offsetHeight","style","map","side","parseInt","concat","reduce","total","slideHeight","children","WOTrack","slide","trackId","thisH","findIndex","e","contains","minHeight","WORotateInit","elements","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","refresh","getAttribute","undefined","stopTracking","isNaN","err","f"],"sourceRoot":""}