jQuery(document).ajaxComplete((function(t,a,e){if(adcmdr_term_meta&&"undefined"!==adcmdr_term_meta&&a&&4===a.readyState&&200===a.status&&e.data&&e.data.indexOf("action=add-tag")>=0&&e.data.indexOf("taxonomy="+adcmdr_term_meta.tax_name)>=0){var d=wpAjax.parseAjaxResponse(a.responseXML,"ajax-response");if(!d||d.errors)return;var n=d.responses.find((function(t){return"term"===t.what}));if(n&&n.supplemental){var r=window.location.pathname;window.location.search&&(r+=window.location.search);var c=["taxonomy="+adcmdr_term_meta.tax_name,"tag_ID="+parseInt(n.supplemental.term_id,10),"post_type="+adcmdr_term_meta.post_type,"wp_http_referer="+encodeURIComponent(r)];window.location=adcmdr_term_meta.terms_url+"?"+c.join("&")}}})),jQuery(document).ready((function(t){var a=t(".adcmdr-group-ad-list");if(a.length>0){var e=function(){var t=a.find(".adcmdr-weight");t.length<=0||("weighted"===p.filter(":checked").val()?(t.show(),_.css("display","inline-block")):(t.hide(),_.hide()))},d=function(){y=[],w.find("[data-adid]").each((function(){y.push(t(this).data("adid"))}))},n=function(){var a=[];w.length>0&&w.children("tr").each((function(){var e=t(this);a.push(e.data("adid"))})),r(a)},r=function(a){c();var e={action:adcmdr_term_meta.actions.update_ad_order.action,security:adcmdr_term_meta.actions.update_ad_order.security,group_id:g,ad_order:a};t.post(adcmdr_term_meta.ajaxurl,e,(function(t){o()}))},c=function(){a.addClass("adcmdr-saving"),l.length>0&&l.attr("disabled",!0),_.length>0&&_.attr("disabled",!0)},o=function(){a.removeClass("adcmdr-saving"),l.length>0&&l.attr("disabled",!1),_.length>0&&_.attr("disabled",!1)},i=function(){w.children("tr").length<=0?(h.hide(),f.show()):(h.show(),f.hide())};new WORotateInit(document.getElementById("adcmdr-group-preview").getElementsByClassName("adcmdr-rotate"));var s=t(".adcmdr-mode-restrict");if(s.length>0){var m=t("#_adcmdr_mode");if(m.length>0){var u=function(){var t=m.val(),a=s.filter(".adcmdr-mode-restrict--"+t);s.not(a).hide(),a.length>0&&a.show()};m.on("change",(function(){u()})),u()}}var l=t('.edit-tag-actions input[type="submit"]');l.length>0&&l.val(adcmdr_term_meta.save_button_text);var _=a.find('input[type="submit"]'),p=t('input[name="_adcmdr_order_method"]'),h=a.find("table"),f=h.siblings(".adcmdr-no-ads"),g=a.data("groupid"),v=a.find("#adcmdr_search_ads"),w=a.find("tbody"),y=[];if(v.length>0){var b=function(){v.on("keydown",(function(a){a.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&a.preventDefault()})).autocomplete({minLength:0,multiselect:!0,source:function(a,e){e(t.map(x,(function(t,e){var d;return-1==t.title.toUpperCase().indexOf(a.term.toUpperCase())||(d=t.id,y.filter((function(t){return t===d})).length>0)?null:{label:t.title,value:t.id,status:t.status}})))},focus:function(){return!1},select:function(a,r){a.preventDefault(),function(a,r,s,m){c();var u="";"publish"!==s&&(u='<span class="adcmdr-ad-status">&mdash; '+s+"</span>");var l='<tr data-adid="'.concat(a,'" class="adcmdr-ad-has-status--').concat(s,'">\n\t\t\t\t\t\t<td class="adcmdr-handle">\n\t\t\t\t\t\t\t<img src="').concat(adcmdr_term_meta.sort_handle_url,'" alt="" class="adcmdr-ui-sort-icon wometa-repeater-sort-icon ui-sortable-handle">\t\t\t\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="adcmdr-weight" style="display: none;">\n\t\t\t\t\t\t\t<input type="number" value="1" name="_adcmdr_ad_weights[').concat(a,']" id="_adcmdr_ad_weights[').concat(a,']">\t\t\t\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="adcmdr-title">\n\t\t\t\t\t\t\t<a href="').concat(m,'">').concat(r,"</a> ").concat(u,'\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="adcmdr-action">\n\t\t\t\t\t\t\t<button title="Remove from group" class="adcmdr-del">\n\t\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101 101">\n\t\t\t\t\t\t\t\t\t<path fill="#ac0101" d="M50.5 16.4c-18.8 0-34.1 15.3-34.1 34.1s15.3 34.1 34.1 34.1 34.1-15.3 34.1-34.1-15.3-34.1-34.1-34.1zm0 63.4c-16.1 0-29.3-13.1-29.3-29.3s13.1-29.3 29.3-29.3 29.3 13.1 29.3 29.3-13.2 29.3-29.3 29.3z"></path>\n\t\t\t\t\t\t\t\t\t<path fill="#ac0101" d="M66.2 47.8H34.8c-1.3 0-2.4 1.1-2.4 2.4s1.1 2.4 2.4 2.4h31.4c1.3 0 2.4-1.1 2.4-2.4s-1.1-2.4-2.4-2.4z"></path>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>');t.post(adcmdr_term_meta.ajaxurl,{action:adcmdr_term_meta.actions.add_ad_to_term.action,security:adcmdr_term_meta.actions.add_ad_to_term.security,group_id:g,ad_id:a},(function(a){void 0!==a.success&&!0===a.success?(w.prepend(t(l)),i(),e(),w.sortable("refresh"),d(),n(),o()):o()}))}(r.item.value,r.item.label,r.item.status),v.val("")}})},x=[];p.on("change",(function(){e()})),h.on("click",".adcmdr-del",(function(){var a=t(this);a.attr("disabled",!0),function(a,e){c();var r={action:adcmdr_term_meta.actions.delete_ad_from_group.action,security:adcmdr_term_meta.actions.delete_ad_from_group.security,group_id:g,ad_id:a};t.post(adcmdr_term_meta.ajaxurl,r,(function(t){t.success&&"delete-ad-from-group"===t.data.action&&(e.closest("tr").remove(),d(),n(),i(),o())}))}(a.closest("tr").data("adid"),a)})),w.sortable().sortable("option","handle",".adcmdr-ui-sort-icon").on("sortupdate",(function(t,a){n()})),e(),t.getJSON(adcmdr_term_meta.ajaxurl,{action:adcmdr_term_meta.actions.get_ads_for_search.action,security:adcmdr_term_meta.actions.get_ads_for_search.security},(function(t){x=t.data.ads?t.data.ads:[],d(),b()}))}}}));